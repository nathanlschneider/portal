<html>
<head>
</head>
<body>
    <div id="out">test</div>
<script>
var watchId;

function successCallback(position) {

var HttpClient = function() {
    this.get = function(aUrl, aCallback) {
        var anHttpRequest = new XMLHttpRequest();
        anHttpRequest.onreadystatechange = function() { 
            if (anHttpRequest.readyState == 4 && anHttpRequest.status == 200)
                aCallback(anHttpRequest.responseText);
        }

        anHttpRequest.open( "GET", aUrl, true );            
        anHttpRequest.send( null );
    }
}
 
  //document.getElementById("locationInfo").innerHTML = "Latitude: " +   
  //position.coords.latitude + "<br>Longitude: " + position.coords.longitude;
  
  var client = new HttpClient();
client.get('http://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=%09gf81ZIs1puhgP0vbK6iIeBJ2TAqJc93B&q=' +  position.coords.latitude + '%2C' + position.coords.longitude, function(response) {
   var data = JSON.parse(response);
   
   
   document.getElementById("out").innerHTML = data.EnglishName;
   })
   
 
   
}

function errorCallback(error) {
  var errorInfo = document.getElementById("out");

  switch (error.code) {
    case error.PERMISSION_DENIED:         
      errorInfo.innerHTML = "User denied the request for Geolocation.";
      break;
    case error.POSITION_UNAVAILABLE:
      errorInfo.innerHTML = "Location information is unavailable.";
      break;
    case error.TIMEOUT:
      errorInfo.innerHTML = "The request to get user location timed out.";
      break;
    case error.UNKNOWN_ERROR:
      errorInfo.innerHTML = "An unknown error occurred.";
      break;
   }
}
</script>
</body>
</html>
        